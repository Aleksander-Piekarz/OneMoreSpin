import { createContext, useContext, useState } from 'react';
import type { ReactNode } from 'react';

type Language = 'pl' | 'en';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// T≈Çumaczenia
const translations: Record<Language, any> = {
  pl: {
    common: {
      welcome: "Witamy",
      login: "Zaloguj siƒô",
      register: "Zarejestruj siƒô",
      logout: "Wyloguj",
      logOut: "Wyloguj siƒô",
      home: "Strona g≈Ç√≥wna",
      profile: "Profil",
      admin: "Panel admina",
      settings: "Ustawienia",
      language: "Jƒôzyk",
      balance: "Saldo",
      loading: "≈Åadowanie...",
      error: "B≈ÇƒÖd",
      success: "Sukces",
      cancel: "Anuluj",
      confirm: "Potwierd≈∫",
      back: "Wstecz",
      play: "Graj",
      bet: "Zak≈Çad",
      spin: "Zakrƒôƒá",
      deal: "Rozdaj",
      hit: "Dobierz",
      stand: "Pasuj",
      double: "Podw√≥j",
      split: "Rozdziel",
      save: "Zapisz",
      close: "Zamknij",
      deposit: "Wp≈Çata",
      withdraw: "Wyp≈Çata",
      history: "Historia",
      characters: "znak√≥w"
    },
    nav: {
      games: "Gry",
      slots: "Automaty",
      roulette: "Ruletka",
      blackjack: "Blackjack",
      poker: "Poker"
    },
    auth: {
      username: "Nazwa u≈ºytkownika",
      email: "Email",
      password: "Has≈Ço",
      confirmPassword: "Potwierd≈∫ has≈Ço",
      forgotPassword: "Zapomnia≈Çe≈õ has≈Ça?",
      resetPassword: "Resetuj has≈Ço",
      noAccount: "Nie masz konta?",
      hasAccount: "Masz ju≈º konto?",
      loginSuccess: "Zalogowano pomy≈õlnie",
      registerSuccess: "Rejestracja zako≈Ñczona",
      name: "Imiƒô",
      surname: "Nazwisko",
      signUp: "Zarejestruj siƒô",
      enterEmail: "Wpisz email",
      enterPassword: "Wpisz has≈Ço",
      confirmYourPassword: "Potwierd≈∫ has≈Ço",
      invalidEmail: "Nieprawid≈Çowy adres email",
      passwordMismatch: "Has≈Ça siƒô nie zgadzajƒÖ",
      passwordTooShort: "Has≈Ço musi mieƒá co najmniej 6 znak√≥w",
      userExists: "U≈ºytkownik o tym emailu ju≈º istnieje",
      invalidCredentials: "Nieprawid≈Çowy email lub has≈Ço",
      confirmEmail: "Potwierd≈∫ adres email przed zalogowaniem"
    },
    games: {
      blackjack: {
        title: "Blackjack",
        description: "Pobij krupiera i zdobƒÖd≈∫ 21!",
        selectMode: "Wybierz tryb gry",
        classicBlackjack: "Classic Blackjack",
        classicDescription: "Klasyczny blackjack. Graj sam przeciwko krupierowi i doskona≈Ç swoje umiejƒôtno≈õci.",
        playSolo: "Graj Solo",
        multiplayer21: "Multiplayer 21",
        multiplayerDescription: "Prawdziwe emocje przy stole! Do≈ÇƒÖcz do innych graczy i pokonaj krupiera razem.",
        joinTable: "Do≈ÇƒÖcz do Sto≈Çu",
        singlePlayer: "Gra jednoosobowa",
        multiplayer: "Gra wieloosobowa",
        lobby: "Lobby",
        dealer: "Krupier",
        dealerScore: "Wynik krupiera",
        dealerCards: "Karty Krupiera",
        yourScore: "Tw√≥j wynik",
        betAmount: "Kwota zak≈Çadu",
        winAmount: "Wygrana",
        dealCards: "ROZDAJ KARTY",
        dealing: "ROZDAWANIE...",
        hit: "DOBIERZ",
        stand: "PASUJ",
        double: "PODW√ìJ",
        win: "WYGRANA!",
        blackjack: "BLACKJACK!",
        lose: "PRZEGRANA",
        push: "REMIS",
        waiting: "Oczekiwanie...",
        dealToStart: "Rozdaj karty, aby zagraƒá",
        currentBet: "Stawka: {{bet}} PLN",
        invalidBet: "Wpisz kwotƒô wiƒôkszƒÖ ni≈º 0",
        insufficientBalance: "NiewystarczajƒÖcy balans",
        gameError: "B≈ÇƒÖd podczas rozpoczynania gry",
        hitError: "B≈ÇƒÖd podczas dobierania karty",
        standError: "B≈ÇƒÖd podczas pasowania",
        doubleError: "B≈ÇƒÖd podczas podwajania",
        showLeaderboard: "Poka≈º ranking",
        hideLeaderboard: "Schowaj ranking"
      },
      roulettePage: {
        title: "Ruletka",
        placeBet: "Postaw zak≈Çad",
        selectNumber: "Wybierz numer",
        selectColor: "Wybierz kolor",
        red: "Czerwone",
        black: "Czarne",
        even: "Parzyste",
        odd: "Nieparzyste"
      },
      poker: {
        title: "Poker",
        description: "Zagraj w Texas Hold'em",
        selectMode: "Wybierz tryb gry",
        royalPoker: "Royal Poker",
        royalDescription: "Trening czyni mistrza. Graj przeciwko krupierowi i doskona≈Ç swoje umiejƒôtno≈õci.",
        playSolo: "Graj Solo",
        texasHoldem: "Texas Hold'em",
        texasDescription: "Prawdziwe emocje przy stole! Do≈ÇƒÖcz do innych graczy i walcz o najwy≈ºsze stawki.",
        joinTable: "Do≈ÇƒÖcz do Sto≈Çu",
        singlePlayer: "Gra jednoosobowa",
        multiplayer: "Gra wieloosobowa",
        lobby: "Lobby",
        fold: "Pasuj",
        call: "Sprawd≈∫",
        raise: "Podbij",
        check: "Czekaj",
        allIn: "All-in",
        yourCards: "Twoje karty",
        communityCards: "Karty wsp√≥lne",
        pot: "Pula",
        turn: "Twoja kolej",
        bet: "Zak≈Çad",
        waiting: "Oczekiwanie...",
        dealToStart: "Rozdaj karty, aby zagraƒá",
        dealCards: "ROZDAJ KARTY",
        dealing: "TASOWANIE...",
        nextRound: "NASTƒòPNE ROZDANIE",
        selectCards: "Wybierz karty do wymiany",
        selectedCards: "Wybrano do wymiany: {{count}}",
        exchange: "WYMIE≈É KARTY",
        win: "WYGRANA!",
        lose: "PRZEGRANA",
        gameStartError: "B≈ÇƒÖd startu",
        gameExchangeError: "B≈ÇƒÖd wymiany",
        showLeaderboard: "Poka≈º ranking",
        hideLeaderboard: "Schowaj ranking"
      },
      slots: {
        title: "Automaty",
        description: "Zagraj w automaty i wygraj!",
        spin: "ZAKRƒòƒÜ",
        bet: "Zak≈Çad",
        invalidBet: "Wpisz kwotƒô wiƒôkszƒÖ ni≈º 0",
        insufficientBalance: "NiewystarczajƒÖcy balans",
        gameError: "B≈ÇƒÖd podczas gry",
        win: "WYGRANA!",
        showLeaderboard: "Poka≈º ranking",
        hideLeaderboard: "Schowaj ranking"
      },
      roulette: {
        title: "Ruletka",
        description: "Postaw ≈ºetony i zakrƒôƒá!",
        placeBet: "Postaw ≈ºeton",
        selectNumber: "Wybierz numer",
        selectColor: "Wybierz kolor",
        red: "Czerwone",
        black: "Czarne",
        even: "Parzyste",
        odd: "Nieparzyste",
        low: "Niskie",
        high: "Wysokie",
        bet: "Zak≈Çad",
        spin: "ZAKRƒòƒÜ",
        gameError: "B≈ÇƒÖd gry",
        win: "WYGRANA!",
        invalidBet: "Wpisz kwotƒô wiƒôkszƒÖ ni≈º 0",
        insufficientBalance: "NiewystarczajƒÖcy balans",
        showLeaderboard: "Poka≈º ranking",
        hideLeaderboard: "Schowaj ranking"
      }
    },
    profile: {
      title: "Tw√≥j profil",
      userInfo: "Informacje o u≈ºytkowniku",
      statistics: "Statystyki",
      gamesPlayed: "Rozegrane gry",
      totalWins: "Wygrane",
      totalLosses: "Przegrane",
      winRate: "Procent wygranych",
      missions: "Misje",
      dailyMissions: "Misje dzienne",
      dailyRewards: "Nagrody dzienne",
      streak: "Seria",
      days: "dni",
      claimReward: "Odbierz nagrodƒô",
      nextRewardIn: "Nastƒôpna nagroda za",
      name: "Imiƒô",
      surname: "Nazwisko",
      email: "Email",
      vipStatus: "Status VIP",
      isVip: "Tak, jestem VIP",
      notVip: "Nie jestem VIP",
      changePassword: "Zmie≈Ñ has≈Ço",
      currentPassword: "Aktualne has≈Ço",
      newPassword: "Nowe has≈Ço",
      confirmNewPassword: "Potwierd≈∫ nowe has≈Ço",
      security: "Bezpiecze≈Ñstwo",
      changePasswordTitle: "Zmiana has≈Ça",
      changePasswordButton: "ZMIE≈É HAS≈ÅO",
      deleteAccountButton: "USU≈É KONTO",
      deleteAccount: "Usu≈Ñ konto",
      deleteAccountTitle: "Usu≈Ñ konto",
      deleteAccountWarning: "‚ö†Ô∏è Ostrze≈ºenie!",
      deleteAccountText: "Ta operacja jest nieodwracalna. Wszystkie Twoje dane, historia gier i saldo zostanƒÖ permanentnie usuniƒôte.",
      deleteAccountConfirm: "Czy na pewno chcesz usunƒÖƒá swoje konto?",
      enterPasswordToConfirm: "Wpisz swoje has≈Ço aby potwierdziƒá",
      allFieldsRequired: "Wszystkie pola sƒÖ wymagane",
      passwordMinLength: "Nowe has≈Ço musi mieƒá co najmniej 6 znak√≥w",
      passwordNotMatching: "Nowe has≈Ça nie sƒÖ zgodne",
      passwordChangedSuccess: "Has≈Ço zosta≈Ço zmienione pomy≈õlnie",
      passwordChanged: "Has≈Ço zosta≈Ço zmienione",
      passwordChangeError: "Nie uda≈Ço siƒô zmieniƒá has≈Ça",
      invalidPassword: "Nieprawid≈Çowe has≈Ço",
      deleteAccountError: "Nie uda≈Ço siƒô usunƒÖƒá konta",
      deleteAccountSuccess: "Konto zosta≈Ço pomy≈õlnie usuniƒôte",
      keepAccount: "Nie, zachowaj konto",
      confirmDeleteAccount: "Tak, usu≈Ñ konto",
      cancel: "Anuluj",
      transactions: "Transakcje",
      gameHistory: "Historia gier",
      noTransactions: "Brak transakcji",
      noGameHistory: "Brak historii gier",
      loadMore: "Wczytaj wiƒôcej",
      depositFunds: "Wp≈Çaƒá ≈õrodki",
      withdrawFunds: "Wyp≈Çaƒá ≈õrodki",
      enterAmount: "Wpisz kwotƒô",
      minimumAmount: "Minimalnie",
      maximumAmount: "Maksymalnie",
      processingPayment: "Przetwarzanie p≈Çatno≈õci...",
      balance: "Saldo",
      type: "Typ",
      outcome: "Wynik",
      winAmount: "Wygrana",
      date: "Data",
      win: "Wygrana",
      lose: "Przegrana"
    },
    missions: {
      title: "Misje",
      daily: "Dzienne",
      completed: "Uko≈Ñczone",
      inProgress: "W trakcie",
      reward: "Nagroda",
      progress: "Postƒôp",
      claim: "Odbierz",
      claimed: "Odebrane",
      complete: "Uko≈Ñcz",
      completionReward: "Nagroda za uko≈Ñczenie"
    },
    admin: {
      title: "Panel Administratora",
      users: "U≈ºytkownicy",
      userManagement: "ZarzƒÖdzanie u≈ºytkownikami",
      email: "Email",
      name: "Imiƒô",
      surname: "Nazwisko",
      balance: "Saldo",
      isVip: "VIP",
      isActive: "Aktywny",
      actions: "Akcje",
      edit: "Edytuj",
      delete: "Usu≈Ñ",
      ban: "Zablokuj",
      unban: "Odblokuj",
      makeVip: "Uczy≈Ñ VIP",
      removeVip: "Usu≈Ñ VIP",
      noUsers: "Brak u≈ºytkownik√≥w",
      firstName: "Imiƒô",
      lastName: "Nazwisko",
      active: "Aktywni",
      vip: "VIP",
      searchPlaceholder: "üîç Szukaj u≈ºytkownika...",
      id: "ID",
      status: "Status",
      noPermissions: "Brak uprawnie≈Ñ administratora",
      serverError: "B≈ÇƒÖd serwera",
      loading: "‚è≥ ≈Åadowanie...",
      error: "‚ùå B≈ÇƒÖd",
      confirmDelete: "Czy na pewno chcesz usunƒÖƒá tego u≈ºytkownika?",
      userDeleted: "U≈ºytkownik usuniƒôty",
      deleteError: "B≈ÇƒÖd podczas usuwania",
      updateBalance: "Zmie≈Ñ balans",
      enterBalance: "Podaj nowy balans:",
      balanceUpdated: "Balans zaktualizowany",
      updateError: "B≈ÇƒÖd podczas aktualizacji balansu",
      previous: "‚Üê Poprzednia",
      next: "Nastƒôpna ‚Üí",
      page: "Strona",
      of: "/"
    },
    lobby: {
      title: "Lobby",
      createTable: "Utw√≥rz st√≥≈Ç",
      joinTable: "Do≈ÇƒÖcz do sto≈Çu",
      availableTables: "Dostƒôpne sto≈Çy",
      tableName: "Nazwa sto≈Çu",
      minBet: "Minimalny zak≈Çad",
      maxBet: "Maksymalny zak≈Çad",
      maxPlayers: "Maks. graczy",
      currentPlayers: "Aktualnie graczy",
      waiting: "Oczekiwanie...",
      players: "Gracze",
      status: "Status",
      startGame: "Zacznij grƒô",
      joinGame: "Do≈ÇƒÖcz do gry",
      full: "Pe≈Çne",
      inProgress: "Trwa gra"
    },
    validation: {
      required: "To pole jest wymagane",
      invalidEmail: "Nieprawid≈Çowy adres email",
      passwordTooShort: "Has≈Ço musi mieƒá co najmniej 6 znak√≥w",
      passwordMismatch: "Has≈Ça siƒô nie zgadzajƒÖ",
      amountInvalid: "Nieprawid≈Çowa kwota",
      amountTooSmall: "Kwota za ma≈Ça",
      insufficientBalance: "NiewystarczajƒÖce saldo"
    }
  },
  en: {
    common: {
      welcome: "Welcome",
      login: "Log in",
      register: "Sign up",
      logout: "Log out",
      logOut: "Log out",
      home: "Home",
      profile: "Profile",
      admin: "Admin panel",
      settings: "Settings",
      language: "Language",
      balance: "Balance",
      loading: "Loading...",
      error: "Error",
      success: "Success",
      cancel: "Cancel",
      confirm: "Confirm",
      back: "Back",
      play: "Play",
      bet: "Bet",
      spin: "Spin",
      deal: "Deal",
      hit: "Hit",
      stand: "Stand",
      double: "Double",
      split: "Split",
      save: "Save",
      close: "Close",
      deposit: "Deposit",
      withdraw: "Withdraw",
      history: "History",
      characters: "characters"
    },
    nav: {
      games: "Games",
      slots: "Slots",
      roulette: "Roulette",
      blackjack: "Blackjack",
      poker: "Poker"
    },
    auth: {
      username: "Username",
      email: "Email",
      password: "Password",
      confirmPassword: "Confirm password",
      forgotPassword: "Forgot password?",
      resetPassword: "Reset password",
      noAccount: "Don't have an account?",
      hasAccount: "Already have an account?",
      loginSuccess: "Successfully logged in",
      registerSuccess: "Registration successful",
      name: "First name",
      surname: "Last name",
      signUp: "Sign up",
      enterEmail: "Enter email",
      enterPassword: "Enter password",
      confirmYourPassword: "Confirm password",
      invalidEmail: "Invalid email address",
      passwordMismatch: "Passwords do not match",
      passwordTooShort: "Password must be at least 6 characters",
      userExists: "User with this email already exists",
      invalidCredentials: "Invalid email or password",
      confirmEmail: "Please confirm your email before logging in"
    },
    games: {
      blackjack: {
        title: "Blackjack",
        description: "Beat the dealer and get 21!",
        selectMode: "Choose game mode",
        classicBlackjack: "Classic Blackjack",
        classicDescription: "Classic blackjack. Play alone against the dealer and perfect your skills.",
        playSolo: "Play Solo",
        multiplayer21: "Multiplayer 21",
        multiplayerDescription: "Real emotions at the table! Join other players and beat the dealer together.",
        joinTable: "Join Table",
        singlePlayer: "Single player",
        multiplayer: "Multiplayer",
        lobby: "Lobby",
        dealer: "Dealer",
        dealerScore: "Dealer score",
        dealerCards: "Dealer Cards",
        yourScore: "Your score",
        betAmount: "Bet amount",
        winAmount: "Win amount",
        dealCards: "DEAL CARDS",
        dealing: "DEALING...",
        hit: "HIT",
        stand: "STAND",
        double: "DOUBLE",
        win: "WIN!",
        blackjack: "BLACKJACK!",
        lose: "LOSE",
        push: "PUSH",
        waiting: "Waiting...",
        dealToStart: "Deal cards to play",
        currentBet: "Bet: {{bet}} PLN",
        invalidBet: "Enter amount greater than 0",
        insufficientBalance: "Insufficient balance",
        gameError: "Error starting game",
        hitError: "Error during hit",
        standError: "Error during stand",
        doubleError: "Error during double",
        showLeaderboard: "Show leaderboard",
        hideLeaderboard: "Hide leaderboard"
      },
      roulettePage: {
        title: "Roulette",
        placeBet: "Place bet",
        selectNumber: "Select number",
        selectColor: "Select color",
        red: "Red",
        black: "Black",
        even: "Even",
        odd: "Odd"
      },
      poker: {
        title: "Poker",
        description: "Play Texas Hold'em",
        selectMode: "Choose game mode",
        royalPoker: "Royal Poker",
        royalDescription: "Practice makes perfect. Play against the dealer and perfect your skills.",
        playSolo: "Play Solo",
        texasHoldem: "Texas Hold'em",
        texasDescription: "Real emotions at the table! Join other players and fight for the highest stakes.",
        joinTable: "Join Table",
        singlePlayer: "Single player",
        multiplayer: "Multiplayer",
        lobby: "Lobby",
        fold: "Fold",
        call: "Call",
        raise: "Raise",
        check: "Check",
        allIn: "All-in",
        yourCards: "Your cards",
        communityCards: "Community cards",
        pot: "Pot",
        turn: "Your turn",
        bet: "Bet",
        waiting: "Waiting...",
        dealToStart: "Deal cards to play",
        dealCards: "DEAL CARDS",
        dealing: "SHUFFLING...",
        nextRound: "NEXT ROUND",
        selectCards: "Select cards to exchange",
        selectedCards: "Selected to exchange: {{count}}",
        exchange: "EXCHANGE CARDS",
        win: "WIN!",
        lose: "LOSE",
        gameStartError: "Start error",
        gameExchangeError: "Exchange error",
        showLeaderboard: "Show leaderboard",
        hideLeaderboard: "Hide leaderboard"
      },
      slots: {
        title: "Slot Machines",
        description: "Play slots and win!",
        dealCards: "SPIN",
        bet: "Bet",
        invalidBet: "Enter amount greater than 0",
        insufficientBalance: "Insufficient balance",
        gameError: "Game error",
        win: "WIN!",
        multiplier: "x",
        showLeaderboard: "Show leaderboard",
        hideLeaderboard: "Hide leaderboard"
      },
      roulette: {
        title: "Roulette",
        description: "Place your bets and spin!",
        placeBet: "Place bet",
        selectNumber: "Select number",
        selectColor: "Select color",
        red: "Red",
        black: "Black",
        even: "Even",
        odd: "Odd",
        low: "Low",
        high: "High",
        bet: "Bet",
        spin: "SPIN",
        gameError: "Game error",
        win: "WIN!",
        invalidBet: "Enter amount greater than 0",
        insufficientBalance: "Insufficient balance",
        showLeaderboard: "Show leaderboard",
        hideLeaderboard: "Hide leaderboard"
      }
    },
    profile: {
      title: "Your profile",
      userInfo: "User information",
      statistics: "Statistics",
      gamesPlayed: "Games played",
      totalWins: "Wins",
      totalLosses: "Losses",
      winRate: "Win rate",
      missions: "Missions",
      dailyMissions: "Daily missions",
      dailyRewards: "Daily rewards",
      streak: "Streak",
      days: "days",
      claimReward: "Claim reward",
      nextRewardIn: "Next reward in",
      name: "First name",
      surname: "Last name",
      email: "Email",
      vipStatus: "VIP Status",
      isVip: "Yes, I'm VIP",
      notVip: "Not VIP",
      changePassword: "Change password",
      currentPassword: "Current password",
      newPassword: "New password",
      confirmNewPassword: "Confirm new password",
      security: "Security",
      changePasswordTitle: "Change password",
      changePasswordButton: "CHANGE PASSWORD",
      deleteAccountButton: "DELETE ACCOUNT",
      deleteAccount: "Delete account",
      deleteAccountTitle: "Delete account",
      deleteAccountWarning: "‚ö†Ô∏è Warning!",
      deleteAccountText: "This action is irreversible. All your data, game history and balance will be permanently deleted.",
      deleteAccountConfirm: "Are you sure you want to delete your account?",
      enterPasswordToConfirm: "Enter your password to confirm",
      allFieldsRequired: "All fields are required",
      passwordMinLength: "New password must be at least 6 characters",
      passwordNotMatching: "New passwords do not match",
      passwordChangedSuccess: "Password changed successfully",
      passwordChanged: "Password has been changed",
      passwordChangeError: "Failed to change password",
      invalidPassword: "Invalid password",
      deleteAccountError: "Failed to delete account",
      deleteAccountSuccess: "Account has been successfully deleted",
      keepAccount: "No, keep my account",
      confirmDeleteAccount: "Yes, delete my account",
      cancel: "Cancel",
      transactions: "Transactions",
      gameHistory: "Game history",
      noTransactions: "No transactions",
      noGameHistory: "No game history",
      loadMore: "Load more",
      depositFunds: "Deposit funds",
      withdrawFunds: "Withdraw funds",
      enterAmount: "Enter amount",
      minimumAmount: "Minimum",
      maximumAmount: "Maximum",
      processingPayment: "Processing payment...",
      balance: "Balance",
      type: "Type",
      outcome: "Outcome",
      winAmount: "Win amount",
      date: "Date",
      win: "Win",
      lose: "Lose"
    },
    missions: {
      title: "Missions",
      daily: "Daily",
      completed: "Completed",
      inProgress: "In progress",
      reward: "Reward",
      progress: "Progress",
      claim: "Claim",
      claimed: "Claimed",
      complete: "Complete",
      completionReward: "Completion reward"
    },
    admin: {
      title: "Admin Panel",
      users: "Users",
      userManagement: "User Management",
      email: "Email",
      name: "First name",
      surname: "Last name",
      balance: "Balance",
      isVip: "VIP",
      firstName: "First name",
      lastName: "Last name",
      active: "Active",
      vip: "VIP",
      searchPlaceholder: "üîç Search user...",
      id: "ID",
      status: "Status",
      noPermissions: "Admin permissions required",
      serverError: "Server error",
      loading: "‚è≥ Loading...",
      error: "‚ùå Error",
      confirmDelete: "Are you sure you want to delete this user?",
      userDeleted: "User deleted",
      deleteError: "Error while deleting user",
      updateBalance: "Change balance",
      enterBalance: "Enter new balance:",
      balanceUpdated: "Balance updated",
      updateError: "Error while updating balance",
      previous: "‚Üê Previous",
      next: "Next ‚Üí",
      page: "Page",
      of: "/"
    },
    lobby: {
      title: "Lobby",
      createTable: "Create table",
      joinTable: "Join table",
      availableTables: "Available tables",
      tableName: "Table name",
      minBet: "Minimum bet",
      maxBet: "Maximum bet",
      maxPlayers: "Max players",
      currentPlayers: "Current players",
      waiting: "Waiting...",
      players: "Players",
      status: "Status",
      startGame: "Start game",
      joinGame: "Join game",
      full: "Full",
      inProgress: "In progress"
    },
    validation: {
      required: "This field is required",
      invalidEmail: "Invalid email address",
      passwordTooShort: "Password must be at least 6 characters",
      passwordMismatch: "Passwords do not match",
      amountInvalid: "Invalid amount",
      amountTooSmall: "Amount too small",
      insufficientBalance: "Insufficient balance"
    }
  }
};

export const LanguageProvider = ({ children }: { children: ReactNode }) => {
  const [language, setLanguageState] = useState<Language>(() => {
    const saved = localStorage.getItem('language');
    return (saved === 'en' || saved === 'pl') ? saved : 'pl';
  });

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem('language', lang);
  };

  const t = (key: string): string => {
    const keys = key.split('.');
    let value: any = translations[language];
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        return key; // Fallback do klucza je≈õli nie znajdzie
      }
    }
    
    return typeof value === 'string' ? value : key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
};
